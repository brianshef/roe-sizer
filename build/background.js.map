{"version":3,"file":"background.js","sources":["app/helpers/dev_menu_template.js","app/helpers/edit_menu_template.js","app/helpers/window.js","app/imageProcess/processor.js","app/messaging/server.js","app/env.js","app/background.js"],"sourcesContent":["import { app, BrowserWindow } from 'electron';\n\nexport var devMenuTemplate = {\n    label: 'Development',\n    submenu: [{\n        label: 'Reload',\n        accelerator: 'CmdOrCtrl+R',\n        click: function () {\n            BrowserWindow.getFocusedWindow().webContents.reloadIgnoringCache();\n        }\n    },{\n        label: 'Toggle DevTools',\n        accelerator: 'Alt+CmdOrCtrl+I',\n        click: function () {\n            BrowserWindow.getFocusedWindow().toggleDevTools();\n        }\n    },{\n        label: 'Quit',\n        accelerator: 'CmdOrCtrl+Q',\n        click: function () {\n            app.quit();\n        }\n    }]\n};\n","export var editMenuTemplate = {\n    label: 'Edit',\n    submenu: [\n        { label: \"Undo\", accelerator: \"CmdOrCtrl+Z\", selector: \"undo:\" },\n        { label: \"Redo\", accelerator: \"Shift+CmdOrCtrl+Z\", selector: \"redo:\" },\n        { type: \"separator\" },\n        { label: \"Cut\", accelerator: \"CmdOrCtrl+X\", selector: \"cut:\" },\n        { label: \"Copy\", accelerator: \"CmdOrCtrl+C\", selector: \"copy:\" },\n        { label: \"Paste\", accelerator: \"CmdOrCtrl+V\", selector: \"paste:\" },\n        { label: \"Select All\", accelerator: \"CmdOrCtrl+A\", selector: \"selectAll:\" }\n    ]\n};\n","// This helper remembers the size and position of your windows (and restores\n// them in that place after app relaunch).\n// Can be used for more than one window, just construct many\n// instances of it and give each different name.\n\nimport { app, BrowserWindow, screen } from 'electron';\nimport jetpack from 'fs-jetpack';\n\nexport default function (name, options) {\n\n    var userDataDir = jetpack.cwd(app.getPath('userData'));\n    var stateStoreFile = 'window-state-' + name +'.json';\n    var defaultSize = {\n        width: options.width,\n        height: options.height\n    };\n    var state = {};\n    var win;\n\n    var restore = function () {\n        var restoredState = {};\n        try {\n            restoredState = userDataDir.read(stateStoreFile, 'json');\n        } catch (err) {\n            // For some reason json can't be read (might be corrupted).\n            // No worries, we have defaults.\n        }\n        return Object.assign({}, defaultSize, restoredState);\n    };\n\n    var getCurrentPosition = function () {\n        var position = win.getPosition();\n        var size = win.getSize();\n        return {\n            x: position[0],\n            y: position[1],\n            width: size[0],\n            height: size[1]\n        };\n    };\n\n    var windowWithinBounds = function (windowState, bounds) {\n        return windowState.x >= bounds.x &&\n            windowState.y >= bounds.y &&\n            windowState.x + windowState.width <= bounds.x + bounds.width &&\n            windowState.y + windowState.height <= bounds.y + bounds.height;\n    };\n\n    var resetToDefaults = function (windowState) {\n        var bounds = screen.getPrimaryDisplay().bounds;\n        return Object.assign({}, defaultSize, {\n            x: (bounds.width - defaultSize.width) / 2,\n            y: (bounds.height - defaultSize.height) / 2\n        });\n    };\n\n    var ensureVisibleOnSomeDisplay = function (windowState) {\n        var visible = screen.getAllDisplays().some(function (display) {\n            return windowWithinBounds(windowState, display.bounds);\n        });\n        if (!visible) {\n            // Window is partially or fully not visible now.\n            // Reset it to safe defaults.\n            return resetToDefaults(windowState);\n        }\n        return windowState;\n    };\n\n    var saveState = function () {\n        if (!win.isMinimized() && !win.isMaximized()) {\n            Object.assign(state, getCurrentPosition());\n        }\n        userDataDir.write(stateStoreFile, state, { atomic: true });\n    };\n\n    state = ensureVisibleOnSomeDisplay(restore());\n\n    win = new BrowserWindow(Object.assign({}, options, state));\n\n    win.on('close', saveState);\n\n    return win;\n}\n","var fs    = require('fs');\nvar path  = require('path');\nvar em    = require('easyimage');\n\nexport var processImages = function(data, event, callback) {\n  _validateImageProcessingData(data, function(data) {\n    var inputDir  = data['inputDir'];\n    var outputDir = data['outputDir'];\n    var width     = data['width'];\n    var queue     = [];\n\n    var files = fs.readdirSync(inputDir);\n    _enqueueValidImages(files, queue, inputDir, outputDir, width, function(queue) {\n      _performProcessing(queue, event, function(response) {\n        if (callback) { callback(response); }\n      });\n    });\n  });\n}\n\nfunction _validateImageProcessingData (data, callback) {\n  var isValid = data && data.outputDir != '' && data.inputDir != '' && data.width > 0;\n  if (isValid && callback) {\n    callback(data);\n  } else {\n    console.warn('Invalid image processing data', data);\n  }\n}\n\n//  Enqueue only valid images and then process the queue with a callback\nfunction _enqueueValidImages(files, queue, inputDir, outputDir, width, callback) {\n  var allowedExtensions = ['.JPG'];\n  files.forEach(function(file, index) {\n    var imgSrc = path.join(inputDir, file);\n    var imgDst = path.join(outputDir, 'resized_' + width + '_' + file);\n    var ext    = path.extname(file).toUpperCase();\n\n    if (allowedExtensions.indexOf(ext) > -1) {\n      queue.push({\n        \"src\": imgSrc,\n        \"dst\": imgDst,\n        \"width\": width\n      });\n    }\n  });\n\n  if (callback) { callback(queue); }\n}\n\n//  Perform the image processing on the queue of image data\nfunction _performProcessing(queue, event, callback) {\n  queue.forEach(function(img, index) {\n    var src   = img['src'];\n    var dst   = img['dst'];\n    var width = img['width'];\n\n    _resizeImage(src, dst, width);\n\n    var n = index + 1;\n    var statusMsg = '( ' + n + ' of ' + queue.length + ' ) Resized ' + src + ' to width ' + width + ' and output to ' + dst;\n    event.sender.send('asynchronous-reply', statusMsg);\n  });\n\n  if (callback) { callback(queue); }\n}\n\n//  Resizes a src image and outputs to dst\nfunction _resizeImage(src, dst, width, callback) {\n  var statusMsg = 'Resized ' + src + ' to width ' + width + ' and output to ' + dst;\n  em.resize({\n     src: src,\n     dst: dst,\n     width: width,\n     quality: 100\n  }).then (\n  function(image) {\n    if (callback) {\n      callback(statusMsg);\n    } else {\n      console.log(statusMsg);\n    }\n  },\n  function (err) {\n    console.error(err);\n  });\n}\n","import { processImages }    from '../imageProcess/processor';\n\n//  Ref: https://github.com/electron/electron/blob/master/docs/api/ipc-main.md\n//  Receive messages from the client (app.js et al)\nconst { ipcMain } = require('electron');\nipcMain.on('asynchronous-message', _handleAsyncMessage);\n\n//  Handle messages from the client (app.js et al)\nfunction _handleAsyncMessage(event, msg) {\n  if (event && msg) {\n    console.info('[asynchronous-message]', msg);\n    if (msg['type'] == 'PROCESS_IMAGES') {\n      _handleProcessImagesMsg(event, msg);\n    } else {\n      _sendResponse(event, 'Message received');\n    }\n  }\n}\n\n// Send responses to the client (app.js et al)\nfunction _sendResponse (event, data) {\n  event.sender.send('asynchronous-reply', data);\n}\n\n//  TODO - Get working\n//  Send a message to the client (app.js et al)\n//  Ref: https://github.com/electron/electron/blob/master/docs/api/web-contents.md#contentssendchannel-arg1-arg2-\nexport var sendMessage = function (browserWindow, msg) {\n  if (browserWindow && browserWindow.webContents) {\n    browserWindow.webContents.send('server-message', {msg: msg});\n  } else {\n    console.warn('Invalid browserWindow; cannot send message', msg);\n  }\n}\n\n//  Logic that occurs for messages regarding image processing\nfunction _handleProcessImagesMsg (event, data) {\n  processImages(data, event);\n}\n","// Simple wrapper exposing environment variables to rest of the code.\n\nimport jetpack from 'fs-jetpack';\n\n// The variables have been written to `env.json` by the build process.\nvar env = jetpack.cwd(__dirname).read('env.json', 'json');\n\nexport default env;\n","// This is main process of Electron, started as first thing when your\n// app starts. This script is running through entire life of your application.\n// It doesn't have any windows which you can see on screen, but we can open\n// window from here.\n\nimport { app, Menu }        from 'electron';\nimport { devMenuTemplate }  from './helpers/dev_menu_template';\nimport { editMenuTemplate } from './helpers/edit_menu_template';\nimport createWindow         from './helpers/window';\n\n//  Enable client/server communications via Electron's ipc\nimport './messaging/server';\n\n// Special module holding environment variables which you declared\n// in config/env_xxx.json file.\nimport env from './env';\n\nvar mainWindow;\n\nvar setApplicationMenu = function () {\n    var menus = [editMenuTemplate];\n    if (env.name !== 'production') {\n        menus.push(devMenuTemplate);\n    }\n    Menu.setApplicationMenu(Menu.buildFromTemplate(menus));\n};\n\napp.on('ready', function () {\n    setApplicationMenu();\n\n    var mainWindow = createWindow('main', {\n        width: 1920,\n        height: 600\n    });\n\n    mainWindow.loadURL('file://' + __dirname + '/app.html');\n});\n\napp.on('window-all-closed', function () {\n    app.quit();\n});\n"],"names":["app","BrowserWindow","screen","Menu"],"mappings":";;;;;;;AAEO,IAAI,eAAe,GAAG;IACzB,KAAK,EAAE,aAAa;IACpB,OAAO,EAAE,CAAC;QACN,KAAK,EAAE,QAAQ;QACf,WAAW,EAAE,aAAa;QAC1B,KAAK,EAAE,YAAY;YACfC,sBAAa,CAAC,gBAAgB,EAAE,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC;SACtE;KACJ,CAAC;QACE,KAAK,EAAE,iBAAiB;QACxB,WAAW,EAAE,iBAAiB;QAC9B,KAAK,EAAE,YAAY;YACfA,sBAAa,CAAC,gBAAgB,EAAE,CAAC,cAAc,EAAE,CAAC;SACrD;KACJ,CAAC;QACE,KAAK,EAAE,MAAM;QACb,WAAW,EAAE,aAAa;QAC1B,KAAK,EAAE,YAAY;YACfD,YAAG,CAAC,IAAI,EAAE,CAAC;SACd;KACJ,CAAC;CACL,CAAC;;ACvBK,IAAI,gBAAgB,GAAG;IAC1B,KAAK,EAAE,MAAM;IACb,OAAO,EAAE;QACL,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,OAAO,EAAE;QAChE,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,mBAAmB,EAAE,QAAQ,EAAE,OAAO,EAAE;QACtE,EAAE,IAAI,EAAE,WAAW,EAAE;QACrB,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,EAAE;QAC9D,EAAE,KAAK,EAAE,MAAM,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,OAAO,EAAE;QAChE,EAAE,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,QAAQ,EAAE;QAClE,EAAE,KAAK,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,YAAY,EAAE;KAC9E;CACJ,CAAC;;qBCHqB,EAAE,IAAI,EAAE,OAAO,EAAE;;IAEpC,IAAI,WAAW,GAAG,OAAO,CAAC,GAAG,CAACA,YAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;IACvD,IAAI,cAAc,GAAG,eAAe,GAAG,IAAI,EAAE,OAAO,CAAC;IACrD,IAAI,WAAW,GAAG;QACd,KAAK,EAAE,OAAO,CAAC,KAAK;QACpB,MAAM,EAAE,OAAO,CAAC,MAAM;KACzB,CAAC;IACF,IAAI,KAAK,GAAG,EAAE,CAAC;IACf,IAAI,GAAG,CAAC;;IAER,IAAI,OAAO,GAAG,YAAY;QACtB,IAAI,aAAa,GAAG,EAAE,CAAC;QACvB,IAAI;YACA,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;SAC5D,CAAC,OAAO,GAAG,EAAE;;;SAGb;QACD,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,WAAW,EAAE,aAAa,CAAC,CAAC;KACxD,CAAC;;IAEF,IAAI,kBAAkB,GAAG,YAAY;QACjC,IAAI,QAAQ,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QACjC,IAAI,IAAI,GAAG,GAAG,CAAC,OAAO,EAAE,CAAC;QACzB,OAAO;YACH,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;YACd,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;YACd,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;YACd,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;SAClB,CAAC;KACL,CAAC;;IAEF,IAAI,kBAAkB,GAAG,UAAU,WAAW,EAAE,MAAM,EAAE;QACpD,OAAO,WAAW,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC;YAC5B,WAAW,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC;YACzB,WAAW,CAAC,CAAC,GAAG,WAAW,CAAC,KAAK,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK;YAC5D,WAAW,CAAC,CAAC,GAAG,WAAW,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;KACtE,CAAC;;IAEF,IAAI,eAAe,GAAG,UAAU,WAAW,EAAE;QACzC,IAAI,MAAM,GAAGE,eAAM,CAAC,iBAAiB,EAAE,CAAC,MAAM,CAAC;QAC/C,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,WAAW,EAAE;YAClC,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC;YACzC,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,GAAG,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC;SAC9C,CAAC,CAAC;KACN,CAAC;;IAEF,IAAI,0BAA0B,GAAG,UAAU,WAAW,EAAE;QACpD,IAAI,OAAO,GAAGA,eAAM,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,UAAU,OAAO,EAAE;YAC1D,OAAO,kBAAkB,CAAC,WAAW,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;SAC1D,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,EAAE;;;YAGV,OAAO,eAAe,CAAC,WAAW,CAAC,CAAC;SACvC;QACD,OAAO,WAAW,CAAC;KACtB,CAAC;;IAEF,IAAI,SAAS,GAAG,YAAY;QACxB,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,EAAE;YAC1C,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,kBAAkB,EAAE,CAAC,CAAC;SAC9C;QACD,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;KAC9D,CAAC;;IAEF,KAAK,GAAG,0BAA0B,CAAC,OAAO,EAAE,CAAC,CAAC;;IAE9C,GAAG,GAAG,IAAID,sBAAa,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;;IAE3D,GAAG,CAAC,EAAE,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;;IAE3B,OAAO,GAAG,CAAC;CACd;;AClFD,IAAI,EAAE,MAAM,OAAO,CAAC,IAAI,CAAC,CAAC;AAC1B,IAAI,IAAI,IAAI,OAAO,CAAC,MAAM,CAAC,CAAC;AAC5B,IAAI,EAAE,MAAM,OAAO,CAAC,WAAW,CAAC,CAAC;;AAEjC,AAAO,IAAI,aAAa,GAAG,SAAS,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE;EACzD,4BAA4B,CAAC,IAAI,EAAE,SAAS,IAAI,EAAE;IAChD,IAAI,QAAQ,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC;IACjC,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;IAClC,IAAI,KAAK,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;IAC9B,IAAI,KAAK,OAAO,EAAE,CAAC;;IAEnB,IAAI,KAAK,GAAG,EAAE,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IACrC,mBAAmB,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,KAAK,EAAE;MAC5E,kBAAkB,CAAC,KAAK,EAAE,KAAK,EAAE,SAAS,QAAQ,EAAE;QAClD,IAAI,QAAQ,EAAE,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE;OACtC,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;AAED,SAAS,4BAA4B,EAAE,IAAI,EAAE,QAAQ,EAAE;EACrD,IAAI,OAAO,GAAG,IAAI,IAAI,IAAI,CAAC,SAAS,IAAI,EAAE,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;EACpF,IAAI,OAAO,IAAI,QAAQ,EAAE;IACvB,QAAQ,CAAC,IAAI,CAAC,CAAC;GAChB,MAAM;IACL,OAAO,CAAC,IAAI,CAAC,+BAA+B,EAAE,IAAI,CAAC,CAAC;GACrD;CACF;;;AAGD,SAAS,mBAAmB,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE;EAC/E,IAAI,iBAAiB,GAAG,CAAC,MAAM,CAAC,CAAC;EACjC,KAAK,CAAC,OAAO,CAAC,SAAS,IAAI,EAAE,KAAK,EAAE;IAClC,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IACvC,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU,GAAG,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,CAAC;IACnE,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC;;IAE9C,IAAI,iBAAiB,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;MACvC,KAAK,CAAC,IAAI,CAAC;QACT,KAAK,EAAE,MAAM;QACb,KAAK,EAAE,MAAM;QACb,OAAO,EAAE,KAAK;OACf,CAAC,CAAC;KACJ;GACF,CAAC,CAAC;;EAEH,IAAI,QAAQ,EAAE,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;CACnC;;;AAGD,SAAS,kBAAkB,CAAC,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE;EAClD,KAAK,CAAC,OAAO,CAAC,SAAS,GAAG,EAAE,KAAK,EAAE;IACjC,IAAI,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;IACvB,IAAI,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;IACvB,IAAI,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;;IAEzB,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;;IAE9B,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;IAClB,IAAI,SAAS,GAAG,IAAI,GAAG,CAAC,GAAG,MAAM,GAAG,KAAK,CAAC,MAAM,GAAG,aAAa,GAAG,GAAG,GAAG,YAAY,GAAG,KAAK,GAAG,iBAAiB,GAAG,GAAG,CAAC;IACxH,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;GACpD,CAAC,CAAC;;EAEH,IAAI,QAAQ,EAAE,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;CACnC;;;AAGD,SAAS,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE;EAC/C,IAAI,SAAS,GAAG,UAAU,GAAG,GAAG,GAAG,YAAY,GAAG,KAAK,GAAG,iBAAiB,GAAG,GAAG,CAAC;EAClF,EAAE,CAAC,MAAM,CAAC;KACP,GAAG,EAAE,GAAG;KACR,GAAG,EAAE,GAAG;KACR,KAAK,EAAE,KAAK;KACZ,OAAO,EAAE,GAAG;GACd,CAAC,CAAC,IAAI;EACP,SAAS,KAAK,EAAE;IACd,IAAI,QAAQ,EAAE;MACZ,QAAQ,CAAC,SAAS,CAAC,CAAC;KACrB,MAAM;MACL,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;KACxB;GACF;EACD,UAAU,GAAG,EAAE;IACb,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;GACpB,CAAC,CAAC;CACJ;;ACnFD;;AAEA,MAAM,EAAE,OAAO,EAAE,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACxC,OAAO,CAAC,EAAE,CAAC,sBAAsB,EAAE,mBAAmB,CAAC,CAAC;;;AAGxD,SAAS,mBAAmB,CAAC,KAAK,EAAE,GAAG,EAAE;EACvC,IAAI,KAAK,IAAI,GAAG,EAAE;IAChB,OAAO,CAAC,IAAI,CAAC,wBAAwB,EAAE,GAAG,CAAC,CAAC;IAC5C,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,gBAAgB,EAAE;MACnC,uBAAuB,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;KACrC,MAAM;MACL,aAAa,CAAC,KAAK,EAAE,kBAAkB,CAAC,CAAC;KAC1C;GACF;CACF;;;AAGD,SAAS,aAAa,EAAE,KAAK,EAAE,IAAI,EAAE;EACnC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;CAC/C;;AAED,AAWA;AACA,SAAS,uBAAuB,EAAE,KAAK,EAAE,IAAI,EAAE;EAC7C,aAAa,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;CAC5B;;AClCD;AACA,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;;ACc1D,IAAI,kBAAkB,GAAG,YAAY;IACjC,IAAI,KAAK,GAAG,CAAC,gBAAgB,CAAC,CAAC;IAC/B,IAAI,GAAG,CAAC,IAAI,KAAK,YAAY,EAAE;QAC3B,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;KAC/B;IACDE,aAAI,CAAC,kBAAkB,CAACA,aAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;CAC1D,CAAC;;AAEFH,YAAG,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY;IACxB,kBAAkB,EAAE,CAAC;;IAErB,IAAI,UAAU,GAAG,YAAY,CAAC,MAAM,EAAE;QAClC,KAAK,EAAE,IAAI;QACX,MAAM,EAAE,GAAG;KACd,CAAC,CAAC;;IAEH,UAAU,CAAC,OAAO,CAAC,SAAS,GAAG,SAAS,GAAG,WAAW,CAAC,CAAC;CAC3D,CAAC,CAAC;;AAEHA,YAAG,CAAC,EAAE,CAAC,mBAAmB,EAAE,YAAY;IACpCA,YAAG,CAAC,IAAI,EAAE,CAAC;CACd,CAAC,CAAC"}