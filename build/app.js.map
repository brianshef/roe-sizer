{"version":3,"file":"app.js","sources":["app/htmlElements/elementIds.js","app/options/input.js","app/options/output.js","app/options/width.js","app/logger/console.js","app/messaging/client.js","app/buttons/buttons.js","app/env.js","app/app.js"],"sourcesContent":["\n\nexport var ids = {\n  'inputId':          'input',\n  'outputId':         'output',\n  'widthId':          'width',\n  'processButtonId':  'button',\n  'progressBarId':    'progress',\n  'statusId':         'status'\n};\n","import { ids } from '../htmlElements/elementIds';\n\nvar _value = '';\n\nfunction _getElement (callback) {\n  var e = document.getElementById(ids['inputId']);\n  if (e && callback) { callback(e); }\n}\n\nfunction _onInputChange (event) {\n  _value = this.value;\n}\n\nexport var getInputValue = function() {\n  return _value;\n}\n\nexport var initInput = function() {\n  _getElement(function(e) {\n    e.addEventListener('change', _onInputChange);\n  });\n}\n","import { ids } from '../htmlElements/elementIds';\n\nvar _value = '';\n\nfunction _getElement (callback) {\n  var e = document.getElementById(ids['outputId']);\n  if (e && callback) { callback(e); }\n}\n\nfunction _onOutputChange (event) {\n  _value = this.value;\n}\n\nexport var getOutputValue = function() {\n  return _value;\n}\n\nexport var initOutput = function() {\n  _getElement(function(e) {\n    e.addEventListener('change', _onOutputChange);\n  });\n}\n","import { ids } from '../htmlElements/elementIds';\n\nvar _value = 0;\n\nfunction _getElement (callback) {\n  var e = document.getElementById(ids['widthId']);\n  if (e && callback) { callback(e); }\n}\n\nfunction _onWidthChange (event) {\n  _value = this.value;\n}\n\nexport var getWidthValue = function() {\n  return _value;\n}\n\nexport var initWidth = function() {\n  _getElement(function(e) {\n    e.addEventListener('change', _onWidthChange);\n  });\n}\n","import { ids } from '../htmlElements/elementIds';\n\n//  Appends a new line to the status console\nexport var _appendLine = function (id, content, callback) {\n  var element = document.getElementById(id);\n  if (element) {\n    var lines = element.value.split(\"\\n\");\n    lines.push(content);\n    element.value = lines.join(\"\\n\");\n  }\n\n  if (callback) { callback(); }\n}\n\n//  Updates the status message to the specified message content.\nexport var updateStatus = function (msg) {\n  _appendLine(ids['statusId'], msg);\n}\n","import { updateStatus } from '../logger/console';\n\n//  Receive messages from server (background.js)\nconst { ipcRenderer } = require('electron');\nipcRenderer.on('asynchronous-reply', _handleAsyncReply);\nipcRenderer.on('server-message', _handleServerMessage);\n\n//  Logic that occurs when message replies from the server are received.\nfunction _handleAsyncReply (event, msg) {\n  console.info('[asynchronous-reply]', msg);\n  updateStatus(msg);\n}\n\n//  Logic that occurs when messages from the server are received.\nfunction _handleServerMessage (event, msg) {\n  console.log('[server-message]', msg);\n  alert(msg);\n}\n\n//  Send messages to server (background.js)\nexport var sendMsgToServer = function (data) {\n  ipcRenderer.send('asynchronous-message', data);\n}\n","import { ids }              from '../htmlElements/elementIds';\nimport { getInputValue }    from '../options/input';\nimport { getOutputValue }   from '../options/output';\nimport { getWidthValue }    from '../options/width';\nimport { updateStatus }     from '../logger/console';\nimport { sendMsgToServer }  from '../messaging/client'\n\n\n//  Get the values of the various options\nfunction _getOptionValues (callback) {\n  if (callback) {\n    callback(getInputValue(), getOutputValue(), getWidthValue());\n  }\n}\n\n//  Formats option data into a JSON message to be read by the server\nfunction _formatMsg (inputDir, outputDir, width, callback) {\n  var msg = {\n    'type': 'PROCESS_IMAGES',\n    'inputDir': inputDir ? inputDir : '',\n    'outputDir': outputDir ? outputDir : '',\n    'width': width ? width : 0\n  };\n\n  if (callback) { callback(msg); }\n}\n\n//  Gets the option values, formats them in a message, and sends the message\n//  to the server to be processed.\nfunction _sendProcessImagesRequest () {\n  _getOptionValues(function(inVal, outVal, wVal) {\n    _formatMsg(inVal, outVal, wVal, function(msg) {\n      sendMsgToServer(msg);\n    });\n  });\n}\n\n//  Logic that occurs when the PROCESS IMAGES button is pressed.\nfunction _onProcessImagesButtonPressed() {\n  _sendProcessImagesRequest();\n}\n\n//  Initialization of buttons\nexport var initButtons = function () {\n  var buttons = [\n    {\n      \"id\": ids['processButtonId'],\n      \"function\": _onProcessImagesButtonPressed\n    }\n  ];\n\n  for (var i in buttons) {\n    var button = buttons[i];\n    var b = document.getElementById(button['id']);\n    if (b) { b.addEventListener(\"click\", button['function']); }\n  }\n}\n","// Simple wrapper exposing environment variables to rest of the code.\n\nimport jetpack from 'fs-jetpack';\n\n// The variables have been written to `env.json` by the build process.\nvar env = jetpack.cwd(__dirname).read('env.json', 'json');\n\nexport default env;\n","// Here is the starting point for your application code.\n// All stuff below is just to show you how it works. You can delete all of it.\n\n// Use new ES6 modules syntax for everything.\nimport os from 'os'; // native node.js module\nimport { remote } from 'electron'; // native electron module\nimport jetpack from 'fs-jetpack'; // module loaded from npm\nimport { ids } from './htmlElements/elementIds';\nimport { initButtons } from './buttons/buttons.js';\nimport { initInput } from './options/input.js';\nimport { initOutput } from './options/output.js';\nimport { initWidth } from './options/width.js';\nimport { updateStatus } from './logger/console';\nimport env from './env';\n\nvar app = remote.app;\nvar appDir = jetpack.cwd(app.getAppPath());\n\n//  Debug variables\nvar pkg         = appDir.read('package.json', 'json');\nvar pkgName     = pkg.name;\nvar productName = pkg.productName;\nvar pkgVersion  = pkg.version;\nvar pkgAuthor   = pkg.author;\nvar platform    = os.platform().toUpperCase();\nvar environment = env.name.toUpperCase();\nvar debugString = pkgName + ' ' + pkgVersion + ' by ' + pkgAuthor + ' on ' + platform + ' ' + environment;\nvar DEBUG_MODE  = environment == 'DEVELOPMENT';\nif (DEBUG_MODE) { console.log(debugString); }\n\n//  Sets the HTML element with the specified ID to the specified visible value\nfunction _setVisible (id, visible, callback) {\n  var element = document.getElementById(id);\n  if (element) {\n    element.visible = visible ? 'VISIBLE' : 'HIDDEN';\n    console.info('Set', id, element.visible);\n\n    // element.display = visible ? 'BLOCK' : 'NONE';\n    // console.info('Set', id, 'display', element.display);\n  }\n\n  if (callback) { callback(); }\n}\n\n\n\n//  Initialization logic\nfunction _initialize() {\n  updateStatus(DEBUG_MODE ? debugString : 'Welcome to ' + productName + ' ' + pkgVersion + ' by ' + pkgAuthor);\n  _setVisible(ids['progressBarId']);\n  initButtons();\n  initInput();\n  initOutput();\n  initWidth();\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  _initialize();\n});\n"],"names":["_value","_getElement","remote"],"mappings":"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"}